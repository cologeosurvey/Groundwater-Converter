# Groundwater Converter User Manual  
### 1	GENERAL SETUP  
#### 1.1	INSTALLATION  
Step 1: From Python.org download Python https://www.python.org/downloads/. Run the installer as it will put it into your Windows Programs files automatically. (Only need to do this once on a new computer.)  

Step 2: With the converter downloaded to your desktop, documents, or some other useful folder, a little setup is required to begin use. First, within the Groundwater Converter v1.1.2 file, find the folder “outputFiles” and folder “finaloutput”, and below the folders find the “analytenames” and “analytenamesremoved” csv files and the “Groundwater Converter v1.1.2” exe. Create shortcuts for these and move (drag) them into the master “Groundwater Converter” folder. Everything you need to do can be accessed by these 5 files.  

#### 1.2	DOWNLOADING DATABASES  
##### 1.2.1	Water Quality Portal  
  To acquire data for the WQP, go to https://www.waterqualitydata.us and using advanced (not basic) select the relevant country, state, and county. Under Site Type select “Aggregate groundwater use (NWIS, STORET)”, “Spring (NWIS, STORET)”, and “Well (NWIS, STORET)”. Under Sample Media select “Water (NWIS, STEWARDS, STORET)”. Under Characteristic Group, select all Inorganics (Major, Minor, Metal, Non-Metal), Nutrient, Physical, and Radiochemical. Under Download the Data keep all data source types. Under File Format select Comma-Separated. Under Data Profiles first download (button at bottom of page) “Site Data Only” and then “Sample Results (physical/chemical metadata)”. These are your two necessary data files for the WQP. Ensure that the “Site Data” file has station somewhere in the name and that “Sample Results” file has Result somewhere in the name.  
##### 1.2.2	ECMC/COGCC  
  To acquire data for the ECMC (formerly COGCC), first navigate to the Downloads tab and in the Environmental section select the Analytical Sample Data (Updated Monthly). Here click on the Water Well Download or just click here to jump to that page: https://ecmc.state.co.us/documents/data/downloads/environmental/WaterWellDownload.html. Extract all files from the zipped folder into your project folder/subfolder. Note: Groundwater sources may include domestic water wells, irrigation wells, stock wells, commercial wells, seeps, or springs. When opening the “WaterWellDownload” Access file which contains macros blocked by Microsoft, click enable and trust.  
Double click on “BasicQuery” under “DL Locations” to open the table, then right click on “BasicQuery” under “DL Locations” to open the dropdown menu. Select “Design View”. You should see a table with the already present columns. Scroll to the right to the first empty column, then add, in order (do second row first “DL_Locations to get proper menu for first row), “County” from DL_Locations, then “Facilility Type” from DL_Locations, and finally “WellDepth” from DL_Locations.  
You can now move on to export the file: Right click on tab header “BasicQuery” and select “Save”. Navigate to the top tab “External Data” and then “Text File” from the top menu banner. First, select your file location and change the file extension in the “File Name” box to .csv, then select “OK”. Now, ensure “Delimited” is selected before selecting “Next” again. Ensure the delimiter is selected as “Comma” and check the box “Include Field Names on First Row” box, select “Next”. Finally, ensure you’re saving your file to the right folder (your input folder for the groundwater converter), and select “Finish”. You can then close Access.  
##### 1.2.3	Colorado Department of Agriculture  
  To acquire the CDA data, first visit https://erams.com/co_agwaterquality/search_data to begin the download process. This is a long and repetitive process so ensure you are keeping good track of what you have downloaded. You should end up with 5 files in the end. To begin, select “County” or “Statewide” under Geographic Type and “All” under available years. You will always leave “Well Uses” as the default, and you will always select “All” under “Name”. Now, you will cycle through “Parameter” and “Level” to get the five. First, leave “Level” as “Detected”. With this setting, select “Submit Query” for “Inorganic”, “Nitrate-Nitrogen”, and “Other”, downloading once the query is ready.   
Next, there are two courses of action depending on the functionality (Sections 1.2.3.1 or 1.2.3.2 below). If you are unsure which method to use, try the first. If this does not work, use the second (created when their website was not functioning correctly).  
###### 1.2.3.1	Colorado Department of Agriculture, Functional Database  
  If the database for the CDA is functional, simply change the “Level” to “Non-Detected” and submit the query for “Inorganic” and “Nitrate-Nitrogen”. Once the query is ready for each, download the table.  
###### 1.2.3.2	Colorado Department of Agriculture, Non-Functional Database  
  Assuming that the database is still nonfunctional, the data must be manually manipulated. To acquire the raw data, as above submit queries for both “Inorganic” and “Nitrate-Nitrogen”. However, once the query is ready, rather than select download, copy the table into a csv. With these raw csv files, run the “nondetectfixer.py” file on each csv. Before running this, you must open the nondetectfixer.py with a text editor or compiler (Sublime Text works well but notepad will do) and change the directory for “ndi” (raw file for nondetects inorganic), “ndn” (raw file for nondetects “no3”), “ndict” (output file for nondetects inorganic crosstabbed), and “ndnct” (crosstabbed output file for nondetects “no3” crosstabbed) to be what you desire . More details exist within the program. Once you run this script, the files will be output where you desired.  
### 2	RUNNING THE PROGRAM  
#### 2.1	STARTUP  
  To begin, run the previously generated “Groundwater Converter v1.1.1 – Shortcut” by double clicking. Two windows should open, a console in the background and a blue GUI in front. On top of the GUI screen, click browse next to Folder. Select the folder where your raw database files are located.  
#### 2.2	FORMATTING DIFFERENT DATABASES  
##### 2.2.1	Water Quality Portal  
  For the Water Quality Portal, you should have a “results” and “station” csv downloaded from their website. Upload the two desired files using the “Upload Primary Files Here” upload slots and change the default “Data Source” to “Water Quality Portal” in the “Select Data Source” box. Click run, and you should have your outputs.  
##### 2.2.2	Colorado Oil and Gas Conservation Commission  
  For the Oil and Gas Conservation Commission, you should have 1 file, for formatting tips see above in 1.2.2. Upload your file using a primary upload slot. Select COGCC under data source and be sure to manually add in your county in the desired county. Select run to get your outputs. (If no data exists for that county, ignore this step.)  

##### 2.2.3	Colorado Department of Agriculture  
  For the Colorado Department of Agriculture, you should have 5   files, for formatting tips, see above in 1.2.3. Upload all five files using all five upload slots, select CDA under data source, and click run to get the outputs. (If no data exists for that county, ignore this step.)  
#### 2.3	MERGING THE DATASETS  
When you have created all the final outputs (up to 3 well detects, 3 well non-detects, 2 spring detects, 2 spring non-detects) and are ready to create a final output file, select the merge outputs button. Keep in mind, if you make any changes to analytenames.csv or the code of the Python script files, you must run the GroundWaterConverter again for the files you changed and must merge the datasets again. Finally, move or copy all the final output files into your project file location. Note should you not need all the cross-tabbed analytes, you delete them in the final output files. This is the simplest way to remove analytes.  
# 3	EDITING THE ANALYTE DATA  
#### 3.1	ADDING FORMATTED NAMES  
  With your shortcut to analyte data created, use it to access the csv. Here, you can see the list of all important analyte names. Cross reference your final output for all column names. If any of these names are not in the right format, insert or find that unformatted name in the csv, and add the new name to the newNames column. It may be necessary to check outputFIles to determine which database the unformatted column name came from.  
#### 3.2	REMOVING UNWANTED ANALYTES  
##### 3.2.1	Water Quality Portal  
  For the WQP, there are no unwanted analytes, you should not need to remove any.  
##### 3.2.2	Colorado Oil and Gas Conservation Commission
  For the COGCC, ensure any wanted analytes are in the “analytenames” file. They will not be included otherwise. To remove one that is already included, simply remove the entry from the analyte names file  for that analyte.
##### 3.2.3	Colorado Department of Agriculture
For the CDA, add your desired removal analytes to the end of the dndlist for loop (line 115) in the same format as the image. You could, for example, copy the line of code: if j==’Carbon’:, i.append(‘Carbon’) and move it below. Then, replace the name “Carbon” with whatever analyte you wish to remove.
